<h1>Purchase <%= @product.name %></h1>

<%= form_with url: product_purchase_path(@product), local: true, id: "payment-form", data: { payment_intent_id: @payment_intent.client_secret } do |form| %>
  <div>
    <label for="card-element">
      Credit or Debit Card
    </label>

    <div id="card-element"></div>

    <div id="card-errors" role="alert"></div>
  </div>

  <div>
    <label>Name on Card</label>
    <%= form.text_field :name_on_card, placeholder: "Full name" %>
  </div>

  <div>
    <%= form.hidden_field :payment_intent_id, value: @payment_intent.id %>

    <button>Submit Payment</button>
  </div>
<% end %>
